# 0914 - 리액트 소개 및 설치, 실행

# 리액트는?

리액트는 인터렉션이 많은 웹 앱을 개발하기 위해 주로 사용된다.

# 리액트는 프레임워크가 아닌 라이브러리!

리액트 vs 뷰 vs 앵귤러

리액트는 라이브러리이고, 뷰와 앵귤러는 프레임워크이다. 

- 프레임워크: 어떠한 앱을 만들기 위해 필요한 대부분의 것을 가지고 있는 것(여러 개의 라이브러리를 포함함)
- 라이브러리: 어떠한 특정 기능을 모듈화 해놓은 것

리액트가 라이브러리인 이유는 리액트는 전적으로 UI를 렌더링 하는 데 관여하기 때문이다!

라우팅은 react-router-dom모듈, 상태 관리는 redux, mobx, recoil 등의 모듈, 빌드를 위해서는 webpack, npm 등, 테스팅을 위해서는Jest, Eslint, Mocha 등을 사용하기 때문에 리액트는 프레임워크가 아닌 라이브러리이다. 뷰나 엥귤러는 이러한 라이브러리들이 따로 있는 것이 아니라 안에 있다. 프레임워크이기 때문에!

# 리액트 컴포넌트

리액트는 여러 컴포넌트를 이용해서 웹 앱을 개발하게 된다. 그렇다면 컴포넌트는 무엇일까?

컴포넌트란, 리액트로 만들어진 앱을 이루는 최소한의 단위이다. 

리액트 컴포넌트는 두가지가 있다. 원래 리액트로 개발할 때는 클래스 컴포넌트를 이용해서 많이 개발 했지만 리액트에서 `리액트 Hooks`라는 것을 발표한 이후부터는 함수형 컴포넌트를 이용해서 개발을 많이 한다. (이 부분은 처음 알았다)

- 클래스형 컴포넌트
    
    ```jsx
    class App extends Component {
    	render() {
    		return <h1>안녕하세요.</h1>;
    	}
    }
    ```
    
- 함수형 컴포넌트
    
    ```jsx
    function App() {
    	return <h1>안녕하세요.</h1>;
    }
    ```
    

# 브라우저가 그려지는 원리 및 가상돔

리액트의 주요 특징 중 하나는 가상돔을 사용한다는 것이다.  

→ 가상돔을 왜 사용하는지 알기 위해서 브라우저가 렌더링하는 과정을 알아보자.

### 웹 페이지 빌드 과정(Critical Rendering Path - CRP)

(잘 정리한 글: [https://it-eldorado.tistory.com/87](https://it-eldorado.tistory.com/87))

1. 서버에서 html문서가 브라우저에 전달된다.
2. DOM tree 생성 - 렌더 엔진이 문서를 읽어들여서 그것들을 파싱하고 어떤 내용을 페이지에 렌더링 할지 결정한다. 
3. Render tree 생성 - 브라우저가 DOM과 CSSOM을 결합하며, 이 프로세스는 화면에 보이는 모든 콘텐츠와 스타일 정보를 모두 포함하는 최종 렌더링 트리를 출력한다. 즉, 화면에 표시되는 모든 노드의 콘텐츠 및 스타일 정보를 포함한다.
4. Layout(reflow) - 브라우저가 페이지에 표시되는 각 요소의 크기와 위치를 계산한다.
5. Pain - 실제 화면에 그린다. 

← 문제점: DOM에 조금이라도 변화가 생기면 그때마다 Render Tree가 재생성되는데, 즉 모든 요소의 스타일을 타시  계산하고 Layout, Repaint 과정까지 다시 거치게 되어 성능 상에 이상을 미치게 된다. 

→ 인터렉션이 엄청나게 많다면? (특히 Single Page Application은 엄청 많다고 함) 작은 변화로 인해 위에 필요한 과정을 계속 거치게 되니 불필요하게 DOM을 조작하여 큰 비용이 발생하게 된다.

→ 그래서 생긴 것이 가상 돔(Virtual DOM)이다. 가상 돔이란 실제 DOM을 메모리에 복사해준 것으로 생각하면 된다. 

가상 돔은 어떻게 작동할까?

데이터가 바뀌면 가상돔에 렌더링되고 이전에 생긴 가상돔과 비교해서 바뀐 부분만 실제 돔에 적용된다. 바뀐 부분을 찾는 과정을 Diffing이라고 부르며, 바뀐 부분만 실제 돔에 적용시켜주는 것을 재조정(reconciliation)이라고 부른다. 

가상 돔은 변화된 것을 묶어서 한꺼번에 실제 DOM에 적용해주기 때문에 만약 요소가 30개가 변하였다고 해도 한 번에 묶어서 한 번의 실제 돔 수정으로 처리하게 돼서 돔을 조작하는 비용을 줄이게 된다.

---

# 리액트 설치하기

## 1. Node.js란?

리액트 프로젝트를 만들기 위해서 Node.js와 npm을 설치해야 하는데 Node.js를 받을 때 Npm도 같이 설치된다. 

Node.js란 크롬 V8 자바스크립트 엔진으로 빌드한 자바스크립트 런타임으로서, 웹 브라우저 환경이 아닌 곳에서도 자바스크립트를 사용하여 연산 할 수 있다. (리액트를 처음 썼을 때 Node.js를 설치했었는데, 이제 기억이 났다. Node.js를 받으면 웹 브라우저 환경이 아닌 곳에서도 자바스크립트를 사용하여 연산할 수 있다는 점을 지금 알았다.)

## 1-1. React 설치 시 Node.js가 필요한 이유는?

리액트 앱은 웹 브라우저에서 실행되는 코드여서 Node.js와 직접적인 연관은 없지만, 프로젝트를 개발하는 데 주요 도구들이 Node.js를 사용하기 때문에 필요하다고 한다. ← 이때 사용하는 개발 도구는 바벨, 모듈화된 코드를 하나의 파일로 합치고 코드를 수정할 때마다 웹 브라우저를 리로딩하는 등 여러 기능을 지닌 웹팩 등이 있다. (모든 소스 파일이 하나로 합쳐짐)

## 2. npx create-react-app <폴더이름>

‘요즘에는’ npx create-react-app <폴더이름>이라는 명령어로 간단하게 리액트를 설치할 수 있다. 

이렇게 하면 Babel이나 Webpack 설정이 이미 다 되어있기 때문에 많은 시간이 걸리지 않고 리액트 앱을 시작할 수 있다. 

- 여기서 npx란?
    
    npx는 노드 패키지 실행을 도와주는 도구이다. create-react-app은 패키지 이름으로, npx create-react-app <파일 이름>을 입력하면 npm 레지스트리(라이브러리들이 저장된 곳)에 있는 create-react-app 패키지를 다운받게 된다. 
    

하지만 예전에는 Webpack이나 Babel 같은 모듈을 설치하고 설정해야 리액트 앱을 시작할 수 있었다. 

### 2-1. Webpack 웹팩이란?

웹팩은 오픈 소스 자바스크립트 모듈 번들러로써 여러개로 나누어져 있는 파일들을 하나의 자바스크립트 코드로 압축하고 최적화하는 라이브러리이다. 

### 2-2. Webpack 웹팩의 장점은?

1. 여러 파일의 자바스크립트 코드를 압축하여 최적화 할 수 있기 때문에 로딩에 대한 네트워크 비용을 줄일 수 있다. 
2. 모듈 단위로 개발이 가능하여, 가독성과 유지보수가 쉽다. 

### 2-3. 바벨이란?

최신 자바스크립트 문법을 지원하지 않는 브라우저들을 위해서 최신 자바스크립트 문법을 구형 브라우저에서도 돌 수 있게 변환 시켜주는 라이브러리

```jsx
// Babel Input: ES6(ES2015) arrow function
[1, 2, 3].map((n)=>n+1);

// Babel Output: ES5 equivalent
[1, 2, 3].map(function(n) {
	return n+1;
});
```

---

# 간단한 To-Do 앱 만들며 리액트 익히기

## Create React App으로 설치된 리액트 기본 구조 살펴보기

- 이름이 수정되면 안되는 파일들
    1. public/index.html - 페이지 템플릿이라서(?)
    2. src/index.js - 자바스크립트 시작점
- Webpack은 src 폴더 안에 있는 것만 보고 처리하기 때문에 src 폴더 안에 JS파일과 CSS파일을 넣으면 된다.
- package.json - 해당 프로젝트에 대한 정보들이 들어있다. 프로젝트 이름, 버전, 필요한 라이브러리와 라이브러리의 버전들이 명시되어있다. 앱을 시작할 때 사용 할 스크립트, 앱을 빌드할 때 그리고 테스트 할 때 사용할 스크립트 등이 명시되어있다.

## React App 실행해보기

```jsx
"scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject"
  }
```

- start: npm run start를 하면 리액트 앱이 시작된다.
- build: npm run build를 하면 웹팩을 통해 압축되어 추후에 배포 시 사용할 수 있는 파일들이 생성된다.
- test: npm run test를 하면 리액트 앱을 테스트할 수 있는데 이건 나중에 다룰 것임

## SPA(Single Page Application)란?

여기부터는 내일 하자!